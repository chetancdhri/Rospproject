<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CineVerse - Ultimate Movie Discovery</title>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Roboto+Slab:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
      :root {
        --primary-dark: #0A0A1A;
        --primary: #13132B;
        --secondary: #1C1C3D;
        --accent: #FF5E63;
        --accent-hover: #FF7E83;
        --teal: #2EC4B6;
        --purple: #715AFF;
        --text: #F1F1F1;
        --text-secondary: #A3A3C2;
        --card-transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        --success: #4CAF50;
        --warning: #FF9800;
        --error: #F44336;
        --overlay-bg: rgba(10, 10, 26, 0.95);
        --gold: #FFD700;
        --silver: #C0C0C0;
        --bronze: #CD7F32;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        background-color: var(--primary-dark);
        font-family: "Poppins", sans-serif;
        margin: 0;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        color: var(--text);
        overflow-x: hidden;
      }

      /* Gradient Background */
      .gradient-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -2;
        background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 50%, var(--secondary) 100%);
      }

      /* Animated Grid Background */
      .grid-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        opacity: 0.1;
        background-image: 
          linear-gradient(rgba(255, 94, 99, 0.3) 1px, transparent 1px),
          linear-gradient(90deg, rgba(255, 94, 99, 0.3) 1px, transparent 1px);
        background-size: 50px 50px;
        animation: gridMove 20s linear infinite;
      }

      @keyframes gridMove {
        0% {
          background-position: 0 0;
        }
        100% {
          background-position: 50px 50px;
        }
      }

      /* Header Styles */
      header {
        padding: 1.2rem 2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        background-color: rgba(19, 19, 43, 0.8);
        flex-wrap: wrap;
        box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
        position: sticky;
        top: 0;
        z-index: 100;
        backdrop-filter: blur(10px);
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      }

      .logo {
        display: flex;
        align-items: center;
        gap: 0.8rem;
      }

      header h1 {
        font-family: 'Roboto Slab', serif;
        color: var(--text);
        padding: 0;
        margin: 0;
        font-size: 2.2rem;
        font-weight: 700;
        background: linear-gradient(45deg, var(--teal), var(--purple));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        position: relative;
        display: inline-block;
      }

      .logo-icon {
        font-size: 2rem;
        color: var(--teal);
      }

      .search-container {
        position: relative;
        display: flex;
        align-items: center;
        width: 300px;
      }

      .search {
        background-color: rgba(255, 255, 255, 0.08);
        border: 2px solid transparent;
        border-radius: 12px;
        font-family: inherit;
        font-size: 1rem;
        padding: 0.8rem 1.5rem 0.8rem 3.2rem;
        color: #fff;
        width: 100%;
        transition: all 0.3s ease;
      }

      .search-icon {
        position: absolute;
        left: 15px;
        color: var(--teal);
        transition: all 0.3s ease;
        z-index: 2;
      }

      .search::placeholder {
        color: var(--text-secondary);
      }

      .search:focus {
        outline: none;
        border-color: var(--purple);
        background-color: rgba(0, 0, 0, 0.2);
        box-shadow: 0 0 20px rgba(113, 90, 255, 0.3);
      }

      .search:focus + .search-icon {
        color: var(--purple);
        transform: scale(1.1);
      }

      /* Search suggestions dropdown */
      .search-suggestions {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: var(--secondary);
        border-radius: 0 0 12px 12px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
        max-height: 300px;
        overflow-y: auto;
        z-index: 1000;
        display: none;
        margin-top: 5px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-top: none;
      }

      .search-suggestions.active {
        display: block;
      }

      .suggestion-item {
        padding: 12px 20px;
        cursor: pointer;
        display: flex;
        align-items: center;
        transition: background-color 0.2s ease;
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      }

      .suggestion-item:last-child {
        border-bottom: none;
      }

      .suggestion-item:hover {
        background-color: rgba(113, 90, 255, 0.2);
      }

      .suggestion-item img {
        width: 40px;
        height: 60px;
        object-fit: cover;
        border-radius: 6px;
        margin-right: 15px;
        flex-shrink: 0;
      }

      .suggestion-info {
        flex-grow: 1;
        overflow: hidden;
      }

      .suggestion-title {
        font-weight: 600;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        margin-bottom: 4px;
      }

      .suggestion-year {
        font-size: 0.8rem;
        color: var(--text-secondary);
      }

      .search-loading {
        position: absolute;
        right: 15px;
        color: var(--teal);
        display: none;
      }

      .search-loading.active {
        display: block;
      }

      .clear-search {
        position: absolute;
        right: 15px;
        color: var(--text-secondary);
        cursor: pointer;
        display: none;
        z-index: 2;
      }

      .clear-search.active {
        display: block;
      }

      .clear-search:hover {
        color: var(--accent);
      }

      /* Hero Section */
      .hero {
        height: 80vh;
        position: relative;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: flex-start;
        margin-bottom: 2rem;
        padding: 0 2rem;
      }

      .hero::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, var(--primary-dark) 0%, transparent 50%);
        z-index: 1;
      }

      .hero-video {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: -1;
        opacity: 0.4;
      }

      .hero-content {
        text-align: left;
        z-index: 2;
        padding: 2rem;
        max-width: 650px;
        position: relative;
      }

      .hero-title {
        font-family: 'Roboto Slab', serif;
        font-size: 3.8rem;
        margin-bottom: 1.5rem;
        background: linear-gradient(to right, var(--teal), var(--purple));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        line-height: 1.1;
        text-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
      }

      .hero-subtitle {
        font-size: 1.3rem;
        margin-bottom: 2.5rem;
        opacity: 0.9;
        color: var(--text-secondary);
        line-height: 1.6;
      }

      .hero-cta {
        background: linear-gradient(45deg, var(--purple), var(--teal));
        color: white;
        border: none;
        padding: 1.2rem 3rem;
        border-radius: 12px;
        font-family: inherit;
        font-weight: 600;
        font-size: 1.1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 10px 20px rgba(113, 90, 255, 0.4);
        position: relative;
        overflow: hidden;
        display: inline-flex;
        align-items: center;
        gap: 0.8rem;
      }

      .hero-cta::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: all 0.6s ease;
      }

      .hero-cta:hover::before {
        left: 100%;
      }

      .hero-cta:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(113, 90, 255, 0.6);
      }

      /* Featured Movies Carousel */
      .featured-carousel {
        margin: 3rem auto;
        max-width: 1400px;
        padding: 0 2rem;
      }

      .carousel-title {
        font-family: 'Roboto Slab', serif;
        font-size: 2.2rem;
        margin-bottom: 2rem;
        position: relative;
        padding-left: 1rem;
        display: inline-block;
      }

      .carousel-title::before {
        content: '';
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        width: 5px;
        height: 80%;
        background: linear-gradient(to bottom, var(--teal), var(--purple));
        border-radius: 10px;
      }

      .carousel-container {
        display: flex;
        gap: 1.5rem;
        overflow-x: auto;
        padding: 1rem 0.5rem;
        scrollbar-width: thin;
        scrollbar-color: var(--purple) var(--secondary);
      }

      .carousel-container::-webkit-scrollbar {
        height: 8px;
      }

      .carousel-container::-webkit-scrollbar-track {
        background: var(--secondary);
        border-radius: 10px;
      }

      .carousel-container::-webkit-scrollbar-thumb {
        background: var(--purple);
        border-radius: 10px;
      }

      .carousel-item {
        flex: 0 0 auto;
        width: 280px;
        background-color: var(--secondary);
        border-radius: 16px;
        overflow: hidden;
        transition: var(--card-transition);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        position: relative;
      }

      .carousel-item:hover {
        transform: translateY(-10px) scale(1.03);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
      }

      .carousel-item img {
        width: 100%;
        height: 400px;
        object-fit: cover;
        transition: transform 0.5s ease;
      }

      .carousel-item:hover img {
        transform: scale(1.1);
      }

      .carousel-info {
        padding: 1.5rem;
        position: relative;
        z-index: 2;
      }

      .carousel-info h3 {
        font-size: 1.2rem;
        margin-bottom: 0.8rem;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        font-weight: 600;
      }

      .carousel-rating {
        background: rgba(0, 0, 0, 0.7);
        padding: 0.4rem 0.8rem;
        border-radius: 8px;
        font-weight: bold;
        display: inline-block;
        position: absolute;
        top: -20px;
        right: 15px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }

      .carousel-rating.gold {
        color: var(--gold);
        background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 215, 0, 0.05));
        border: 1px solid rgba(255, 215, 0, 0.3);
      }

      /* Navigation Tabs */
      .nav-tabs {
        display: flex;
        justify-content: center;
        margin: 3rem 0 2rem;
        padding: 0 1rem;
        flex-wrap: wrap;
        gap: 1rem;
      }

      .tab {
        background: transparent;
        border: none;
        color: var(--text);
        padding: 0.8rem 2rem;
        border-radius: 12px;
        cursor: pointer;
        font-family: inherit;
        font-weight: 500;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .tab::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(46, 196, 182, 0.2), transparent);
        transition: all 0.6s ease;
      }

      .tab:hover::before {
        left: 100%;
      }

      .tab:hover {
        background: rgba(255, 255, 255, 0.05);
        transform: translateY(-3px);
        border-color: rgba(113, 90, 255, 0.3);
      }

      .tab.active {
        background: linear-gradient(135deg, var(--purple), var(--teal));
        box-shadow: 0 8px 20px rgba(113, 90, 255, 0.4);
        transform: translateY(-3px);
        border: none;
      }

      /* Main Content */
      main {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        padding: 1rem 2rem;
        flex: 1;
        max-width: 1600px;
        margin: 0 auto;
        width: 100%;
  }

      .section-title {
        width: 100%;
        text-align: center;
        margin: 2rem 0 3rem;
        font-size: 2.5rem;
        font-weight: 700;
        opacity: 0;
        animation: fadeInUp 1s ease forwards;
        animation-delay: 0.3s;
        font-family: 'Roboto Slab', serif;
        position: relative;
        padding-bottom: 1rem;
      }

      .section-title::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 150px;
        height: 4px;
        background: linear-gradient(90deg, var(--teal), var(--purple));
        border-radius: 10px;
      }

      .movie-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 2.5rem;
        width: 100%;
      }

      .movie-card {
        background-color: var(--secondary);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        position: relative;
        overflow: hidden;
        border-radius: 16px;
        cursor: pointer;
        transition: var(--card-transition);
        opacity: 0;
        transform: translateY(20px);
        animation: cardAppear 0.6s ease forwards;
        border: 1px solid rgba(255, 255, 255, 0.05);
      }

      .movie-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(to bottom, transparent 0%, transparent 60%, rgba(0, 0, 0, 0.8) 100%);
        z-index: 1;
        opacity: 0;
        transition: opacity 0.5s ease;
      }

      .movie-card:hover::before {
        opacity: 1;
      }

      .movie-card:nth-child(1) { animation-delay: 0.1s; }
      .movie-card:nth-child(2) { animation-delay: 0.2s; }
      .movie-card:nth-child(3) { animation-delay: 0.3s; }
      .movie-card:nth-child(4) { animation-delay: 0.4s; }
      .movie-card:nth-child(5) { animation-delay: 0.5s; }
      .movie-card:nth-child(6) { animation-delay: 0.6s; }

      @keyframes cardAppear {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes fadeInUp {
        from { 
          opacity: 0;
          transform: translateY(20px);
        }
        to { 
          opacity: 1;
          transform: translateY(0);
        }
      }

      .movie-card:hover {
        transform: translateY(-10px) scale(1.03);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
      }

      .movie-card img {
        width: 100%;
        height: 400px;
        object-fit: cover;
        transition: transform 0.5s ease;
      }

      .movie-card:hover img {
        transform: scale(1.1);
      }

      .movie-info {
        color: var(--text);
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 1.5rem;
        letter-spacing: 0.5px;
        position: relative;
        z-index: 2;
      }

      .movie-info h3 {
        margin: 0;
        font-size: 1.1rem;
        max-width: 200px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        font-weight: 600;
      }

      .movie-info span {
        background-color: rgba(0, 0, 0, 0.7);
        padding: 0.4rem 0.8rem;
        border-radius: 8px;
        font-weight: bold;
        flex-shrink: 0;
        transition: all 0.3s ease;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .movie-card:hover .movie-info span {
        transform: scale(1.1);
        box-shadow: 0 0 15px rgba(255, 255, 255, 0.1);
      }

      .movie-info span.green {
        color: lightgreen;
      }

      .movie-info span.orange {
        color: orange;
      }

      .movie-info span.red {
        color: #ff6b6b;
      }

      .movie-info span.gold {
        color: var(--gold);
        text-shadow: 0 0 5px rgba(255, 215, 0, 0.5);
      }

      .movie-info span.silver {
        color: var(--silver);
      }

      .movie-info span.bronze {
        color: var(--bronze);
      }

      .overview {
        position: absolute;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: var(--overlay-bg);
        padding: 1.8rem;
        transform: translateY(101%);
        transition: transform 0.5s ease;
        backdrop-filter: blur(10px);
        max-height: 80%;
        overflow-y: auto;
        z-index: 2;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
      }

      .movie-card:hover .overview {
        transform: translateY(0);
      }

      .overview h4 {
        margin-bottom: 1rem;
        font-size: 1.3rem;
        border-bottom: 1px solid var(--teal);
        padding-bottom: 0.5rem;
        color: var(--teal);
      }

      /* Trending Badge */
      .trending-badge {
        position: absolute;
        top: 15px;
        right: 15px;
        background: linear-gradient(135deg, var(--accent), var(--purple));
        color: white;
        padding: 0.4rem 0.8rem;
        border-radius: 20px;
        font-size: 0.7rem;
        font-weight: bold;
        z-index: 3;
        animation: pulse 2s infinite;
        box-shadow: 0 5px 15px rgba(255, 94, 99, 0.4);
      }

      @keyframes pulse {
        0% {
          box-shadow: 0 0 0 0 rgba(255, 94, 99, 0.7);
        }
        70% {
          box-shadow: 0 0 0 10px rgba(255, 94, 99, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(255, 94, 99, 0);
        }
      }

      /* Award Badge */
      .award-badge {
        position: absolute;
        top: 15px;
        left: 15px;
        background: linear-gradient(135deg, var(--gold), var(--bronze));
        color: #000;
        padding: 0.4rem 0.8rem;
        border-radius: 20px;
        font-size: 0.7rem;
        font-weight: bold;
        z-index: 3;
        animation: shine 3s infinite;
        box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
      }

      @keyframes shine {
        0% {
          box-shadow: 0 0 5px var(--gold);
        }
        50% {
          box-shadow: 0 0 15px var(--gold);
        }
        100% {
          box-shadow: 0 0 5px var(--gold);
        }
      }

      /* Skeleton Loading */
      .skeleton {
        animation: skeleton-loading 1s linear infinite alternate;
        border-radius: 8px;
      }

      @keyframes skeleton-loading {
        0% {
          background-color: hsl(240, 20%, 15%);
        }
        100% {
          background-color: hsl(240, 20%, 25%);
        }
      }

      .skeleton-card {
        width: 280px;
        height: 500px;
        border-radius: 16px;
        overflow: hidden;
        border: 1px solid rgba(255, 255, 255, 0.05);
      }

      .skeleton-poster {
        width: 100%;
        height: 400px;
        margin-bottom: 1rem;
        position: relative;
        overflow: hidden;
      }

      .skeleton-text {
        height: 1rem;
        margin: 0.5rem;
        border-radius: 3px;
      }

      .skeleton-text:last-child {
        width: 50%;
      }

      /* Poster Placeholder */
      .poster-placeholder {
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, var(--secondary), var(--primary));
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: var(--text-secondary);
        padding: 1rem;
        text-align: center;
      }

      .poster-placeholder i {
        font-size: 3rem;
        margin-bottom: 1rem;
        color: var(--purple);
      }

      .poster-placeholder p {
        font-size: 0.9rem;
      }

      /* Modal Styles */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: var(--overlay-bg);
        z-index: 1000;
        overflow-y: auto;
        backdrop-filter: blur(8px);
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .modal.active {
        display: flex;
        justify-content: center;
        align-items: center;
        opacity: 1;
      }

      .modal-content {
        background: linear-gradient(135deg, var(--secondary) 0%, #1C1C3D 100%);
        margin: 2rem;
        padding: 0;
        border-radius: 20px;
        width: 90%;
        max-width: 1000px;
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
        position: relative;
        transform: scale(0.9) translateY(50px);
        opacity: 0;
        transition: all 0.4s ease;
        overflow: hidden;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .modal.active .modal-content {
        transform: scale(1) translateY(0);
        opacity: 1;
      }

      .modal-header {
        padding: 2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        background: rgba(0, 0, 0, 0.2);
      }

      .modal-title {
        font-size: 2.2rem;
        margin: 0;
        font-family: 'Roboto Slab', serif;
        color: var(--teal);
        max-width: 80%;
      }

      .close-modal {
        background: transparent;
        border: none;
        color: var(--text);
        font-size: 2rem;
        cursor: pointer;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        transition: all 0.3s ease;
      }

      .close-modal:hover {
        background: rgba(255, 94, 99, 0.2);
        color: var(--accent);
        transform: rotate(90deg);
      }

      .modal-body {
        padding: 2.5rem;
        display: flex;
        flex-direction: column;
        gap: 2.5rem;
      }

      @media (min-width: 900px) {
        .modal-body {
          flex-direction: row;
        }
      }

      .modal-poster {
        flex-shrink: 0;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
        transition: all 0.5s ease;
        max-width: 350px;
        align-self: flex-start;
      }

      .modal-poster:hover {
        transform: scale(1.03);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
      }

      .modal-poster img {
        width: 100%;
        display: block;
      }

      .modal-details {
        flex-grow: 1;
      }

      .detail-item {
        margin-bottom: 2rem;
        position: relative;
        padding-left: 2rem;
      }

      .detail-item::before {
        content: '';
        position: absolute;
        left: 0;
        top: 0.4rem;
        width: 12px;
        height: 12px;
        background: linear-gradient(135deg, var(--teal), var(--purple));
        border-radius: 50%;
      }

      .detail-item h4 {
        font-size: 1rem;
        margin-bottom: 0.8rem;
        color: var(--text-secondary);
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .detail-item p {
        font-size: 1.2rem;
        line-height: 1.6;
      }

      .genre-list {
        display: flex;
        flex-wrap: wrap;
        gap: 0.8rem;
        margin-top: 0.8rem;
        max-width: 400px;
      }

      .genre {
        background: rgba(113, 90, 255, 0.2);
        color: var(--text);
        padding: 0.5rem 1rem;
        border-radius: 20px;
        font-size: 0.9rem;
        transition: all 0.3s ease;
        border: 1px solid rgba(113, 90, 255, 0.3);
      }

      .genre:hover {
        background: var(--purple);
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(113, 90, 255, 0.4);
      }

      /* Cast & Crew Section */
      .cast-crew {
        margin-top: 2.5rem;
      }

      .cast-grid {
        display: flex;
        overflow-x: auto;
        gap: 1.5rem;
        padding: 1.5rem 0;
        scrollbar-width: thin;
        scrollbar-color: var(--purple) var(--secondary);
      }

      .cast-grid::-webkit-scrollbar {
        height: 8px;
      }

      .cast-grid::-webkit-scrollbar-track {
        background: var(--secondary);
        border-radius: 10px;
      }

      .cast-grid::-webkit-scrollbar-thumb {
        background: var(--purple);
        border-radius: 10px;
      }

      .cast-member {
        flex: 0 0 auto;
        width: 140px;
        text-align: center;
        transition: transform 0.3s ease;
      }

      .cast-member:hover {
        transform: translateY(-8px);
      }

      .cast-photo {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        object-fit: cover;
        margin: 0 auto;
        border: 3px solid transparent;
        transition: border-color 0.3s ease;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
      }

      .cast-member:hover .cast-photo {
        border-color: var(--teal);
      }

      .cast-name {
        font-weight: 600;
        margin-top: 1rem;
        font-size: 1rem;
        max-width: 120px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        margin-left: auto;
        margin-right: auto;
      }

      .cast-character {
        font-size: 0.9rem;
        color: var(--text-secondary);
        margin-top: 0.3rem;
        max-width: 120px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        margin-left: auto;
        margin-right: auto;
      }

      /* Loading Animation */
      .loading {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 300px;
        width: 100%;
      }

      .spinner {
        width: 60px;
        height: 60px;
        border: 4px solid rgba(255, 255, 255, 0.1);
        border-radius: 50%;
        border-top-color: var(--teal);
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* Error Message */
      .error-message {
        text-align: center;
        padding: 4rem 1rem;
        width: 100%;
      }

      .error-icon {
        font-size: 4rem;
        margin-bottom: 1.5rem;
        color: var(--accent);
        animation: pulse 2s infinite;
      }

      .error-message p {
        margin-bottom: 2rem;
        font-size: 1.3rem;
        max-width: 500px;
        margin-left: auto;
        margin-right: auto;
        color: var(--text-secondary);
      }

      .retry-btn {
        background: linear-gradient(135deg, var(--purple), var(--teal));
        color: white;
        border: none;
        padding: 1rem 2.5rem;
        border-radius: 12px;
        cursor: pointer;
        font-family: inherit;
        font-weight: 500;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        display: inline-flex;
        align-items: center;
        gap: 0.8rem;
      }

      .retry-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: all 0.6s ease;
      }

      .retry-btn:hover::before {
        left: 100%;
      }

      .retry-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 20px rgba(113, 90, 255, 0.4);
      }

      /* Not Found State */
      .not-found {
        text-align: center;
        padding: 4rem 1rem;
        width: 100%;
      }

      .not-found-icon {
        font-size: 5rem;
        margin-bottom: 1.5rem;
        color: var(--text-secondary);
      }

      .not-found h3 {
        font-size: 1.8rem;
        margin-bottom: 1.5rem;
      }

      .not-found p {
        margin-bottom: 2rem;
        color: var(--text-secondary);
        max-width: 500px;
        margin-left: auto;
        margin-right: auto;
        font-size: 1.1rem;
      }

      /* Footer */
      .footer {
        background-color: var(--secondary);
        padding: 2rem;
        margin-top: auto;
        text-align: center;
        position: relative;
        overflow: hidden;
        border-top: 1px solid rgba(255, 255, 255, 0.05);
      }

      .footer::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 3px;
        background: linear-gradient(90deg, var(--teal), var(--purple));
      }

      .footer p {
        color: var(--text);
        margin: 0;
        font-size: 1rem;
        opacity: 0.8;
      }

      /* Pagination */
      .pagination {
        display: flex;
        justify-content: center;
        margin: 3rem 0;
        width: 100%;
        gap: 0.8rem;
      }

      .page-btn {
        background: rgba(255, 255, 255, 0.1);
        color: var(--text);
        border: none;
        width: 50px;
        height: 50px;
        border-radius: 12px;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .page-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(46, 196, 182, 0.3), transparent);
        transition: all 0.6s ease;
      }

      .page-btn:hover::before {
        left: 100%;
      }

      .page-btn:hover {
        background: rgba(113, 90, 255, 0.2);
        transform: translateY(-3px);
        border-color: rgba(113, 90, 255, 0.3);
      }

      .page-btn.active {
        background: linear-gradient(135deg, var(--purple), var(--teal));
        box-shadow: 0 8px 20px rgba(113, 90, 255, 0.4);
        transform: translateY(-3px);
        border: none;
      }

      .page-btn.disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .page-btn.disabled:hover {
        transform: none;
        background: rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.1);
      }

      /* Toast Notification */
      .toast {
        position: fixed;
        bottom: 30px;
        right: 30px;
        padding: 1.2rem 2rem;
        background: var(--secondary);
        color: white;
        border-radius: 12px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
        display: flex;
        align-items: center;
        gap: 1rem;
        z-index: 2000;
        transform: translateY(100px);
        opacity: 0;
        transition: all 0.5s ease;
        border-left: 4px solid var(--error);
        max-width: 400px;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .toast.show {
        transform: translateY(0);
        opacity: 1;
      }

      .toast.error {
        border-left-color: var(--accent);
      }

      .toast.success {
        border-left-color: var(--teal);
      }

      .toast-icon {
        font-size: 1.5rem;
      }

      .toast.error .toast-icon {
        color: var(--accent);
      }

      .toast.success .toast-icon {
        color: var(--teal);
      }

      /* Filter Section */
      .filters {
        display: flex;
        justify-content: center;
        gap: 1.5rem;
        margin: 2rem 0 3rem;
        flex-wrap: wrap;
      }

      .filter-select {
        background: rgba(255, 255, 255, 0.08);
        border: 2px solid transparent;
        border-radius: 12px;
        padding: 0.8rem 1.8rem;
        color: var(--text);
        font-family: inherit;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .filter-select:focus {
        outline: none;
        border-color: var(--purple);
        background: rgba(0, 0, 0, 0.2);
        box-shadow: 0 0 20px rgba(113, 90, 255, 0.3);
      }

      /* Watch Providers */
      .watch-providers {
        margin-top: 2.5rem;
      }

      .providers-list {
        display: flex;
        flex-wrap: wrap;
        gap: 1.5rem;
        margin-top: 1.5rem;
      }

      .provider {
        display: flex;
        flex-direction: column;
        align-items: center;
        transition: transform 0.3s ease;
      }

      .provider:hover {
        transform: translateY(-8px);
      }

      .provider-logo {
        width: 60px;
        height: 60px;
        border-radius: 12px;
        object-fit: cover;
        background: white;
        padding: 5px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }

      .provider-name {
        margin-top: 0.8rem;
        font-size: 0.9rem;
        text-align: center;
        color: var(--text-secondary);
      }

      /* Similar Movies */
      .similar-movies {
        margin-top: 2.5rem;
      }

      .similar-grid {
        display: flex;
        overflow-x: auto;
        gap: 1.5rem;
        padding: 1.5rem 0;
      }

      .similar-movie {
        flex: 0 0 auto;
        width: 180px;
        border-radius: 12px;
        overflow: hidden;
        transition: transform 0.3s ease;
        position: relative;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
      }

      .similar-movie:hover {
        transform: scale(1.08);
      }

      .similar-movie img {
        width: 100%;
        height: 270px;
        object-fit: cover;
      }

      .similar-title {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: rgba(0, 0, 0, 0.8);
        padding: 0.8rem;
        font-size: 0.9rem;
        text-align: center;
        backdrop-filter: blur(5px);
      }

      /* Responsive Design */
      @media (max-width: 1200px) {
        .movie-grid {
          grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
          gap: 2rem;
        }
        
        .hero-title {
          font-size: 3.2rem;
        }
      }

      @media (max-width: 992px) {
        .movie-grid {
          grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
          gap: 1.8rem;
        }
        
        .hero-title {
          font-size: 2.8rem;
        }
        
        .search-container {
          width: 250px;
        }

        .modal-body {
          flex-direction: column;
        }

        .modal-poster {
          align-self: center;
        }
      }

      @media (max-width: 768px) {
        header {
          flex-direction: column;
          gap: 1.5rem;
          padding: 1.5rem;
        }

        .search-container {
          width: 100%;
          max-width: 100%;
        }

        .movie-grid {
          grid-template-columns: repeat(auto-fill, minmax(100%, 1fr));
          gap: 2rem;
        }

        .movie-card {
          max-width: 100%;
        }
        
        .movie-card img {
          height: 400px;
        }

        .hero {
          height: 70vh;
          padding: 0 1.5rem;
        }
        
        .hero-title {
          font-size: 2.5rem;
        }
        
        .hero-subtitle {
          font-size: 1.1rem;
        }

        .filters {
          flex-direction: column;
          align-items: center;
        }

        .filter-select {
          width: 100%;
          max-width: 280px;
        }

        .modal-content {
          margin: 1rem;
        }

        .modal-header {
          padding: 1.5rem;
        }

        .modal-title {
          font-size: 1.8rem;
        }

        .modal-body {
          padding: 1.5rem;
        }

        .section-title {
          font-size: 2rem;
        }
      }

      @media (max-width: 480px) {
        .movie-card img {
          height: 350px;
        }

        .hero {
          height: 60vh;
        }
        
        .hero-title {
          font-size: 2rem;
        }
        
        .hero-cta {
          padding: 1rem 2rem;
          font-size: 1rem;
        }
        
        .section-title {
          font-size: 1.8rem;
        }
        
        .search-suggestions {
          max-height: 250px;
        }
        
        .suggestion-item {
          padding: 10px 15px;
        }
        
        .suggestion-item img {
          width: 35px;
          height: 50px;
          margin-right: 10px;
        }

        .modal-header {
          padding: 1.2rem;
        }

        .modal-title {
          font-size: 1.5rem;
        }

        .modal-body {
          padding: 1.2rem;
        }

        .detail-item {
          padding-left: 1.5rem;
        }

        .page-btn {
          width: 45px;
          height: 45px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Background Elements -->
    <div class="gradient-bg"></div>
    <div class="grid-bg"></div>

    <header>
      <div class="logo">
        <i class="fas fa-film logo-icon"></i>
        <h1>CineVerse</h1>
      </div>
      <div class="search-container">
        <i class="fas fa-search search-icon"></i>
        <input type="text" placeholder="Search for movies..." id="search" class="search" />
        <i class="fas fa-times clear-search" id="clear-search"></i>
        <i class="fas fa-spinner fa-spin search-loading" id="search-loading"></i>
        <div class="search-suggestions" id="search-suggestions"></div>
      </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
      <video class="hero-video" autoplay muted loop>
        <source src="http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/WeAreGoingOnBullrun.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <div class="hero-content">
        <h1 class="hero-title">Discover Cinematic Masterpieces</h1>
        <p class="hero-subtitle">Explore thousands of films, get personalized recommendations, and dive deep into the world of cinema</p>
        <button class="hero-cta" id="explore-cta">
          <i class="fas fa-play-circle"></i>
          Explore Now
        </button>
      </div>
    </section>

    <!-- Featured Movies Carousel -->
    <div class="featured-carousel">
      <h2 class="carousel-title">Featured This Week</h2>
      <div class="carousel-container" id="featured-carousel">
        <!-- Content will be populated by JavaScript -->
      </div>
    </div>

    <div class="nav-tabs">
      <button class="tab active" data-category="popular">Popular</button>
      <button class="tab" data-category="now_playing">Now Playing</button>
      <button class="tab" data-category="upcoming">Upcoming</button>
      <button class="tab" data-category="top_rated">Top Rated</button>
      <button class="tab" data-category="trending">Trending</button>
      <button class="tab" data-category="genre">By Genre</button>
    </div>

    <!-- Genre Filters (Hidden by default) -->
    <div class="filters" id="genre-filters" style="display: none;">
      <select class="filter-select" id="genre-select">
        <option value="action">Action</option>
        <option value="adventure">Adventure</option>
        <option value="animation">Animation</option>
        <option value="comedy">Comedy</option>
        <option value="crime">Crime</option>
        <option value="documentary">Documentary</option>
        <option value="drama">Drama</option>
        <option value="family">Family</option>
        <option value="fantasy">Fantasy</option>
        <option value="history">History</option>
        <option value="horror">Horror</option>
        <option value="music">Music</option>
        <option value="mystery">Mystery</option>
        <option value="romance">Romance</option>
        <option value="sci-fi">Science Fiction</option>
        <option value="thriller">Thriller</option>
        <option value="war">War</option>
        <option value="western">Western</option>
      </select>
      <button class="hero-cta" id="apply-genre" style="padding: 0.8rem 1.8rem;">
        <i class="fas fa-filter"></i>
        Apply Filter
      </button>
    </div>

    <main id="main">
      <h2 class="section-title" id="section-title">Popular Movies</h2>
      <div class="movie-grid" id="movie-grid">
        <!-- Skeleton loading cards -->
        <div class="skeleton-card">
          <div class="skeleton skeleton-poster"></div>
          <div class="skeleton skeleton-text" style="width: 70%"></div>
          <div class="skeleton skeleton-text" style="width: 30%"></div>
        </div>
        <div class="skeleton-card">
          <div class="skeleton skeleton-poster"></div>
          <div class="skeleton skeleton-text" style="width: 70%"></div>
          <div class="skeleton skeleton-text" style="width: 30%"></div>
        </div>
        <div class="skeleton-card">
          <div class="skeleton skeleton-poster"></div>
          <div class="skeleton skeleton-text" style="width: 70%"></div>
          <div class="skeleton skeleton-text" style="width: 30%"></div>
        </div>
        <div class="skeleton-card">
          <div class="skeleton skeleton-poster"></div>
          <div class="skeleton skeleton-text" style="width: 70%"></div>
          <div class="skeleton skeleton-text" style="width: 30%"></div>
        </div>
        <div class="skeleton-card">
          <div class="skeleton skeleton-poster"></div>
          <div class="skeleton skeleton-text" style="width: 70%"></div>
          <div class="skeleton skeleton-text" style="width: 30%"></div>
        </div>
        <div class="skeleton-card">
          <div class="skeleton skeleton-poster"></div>
          <div class="skeleton skeleton-text" style="width: 70%"></div>
          <div class="skeleton skeleton-text" style="width: 30%"></div>
        </div>
      </div>
      <div class="pagination" id="pagination"></div>
    </main>

    <div class="modal" id="movie-modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title" id="modal-title">Movie Title</h3>
          <button class="close-modal" id="close-modal">&times;</button>
        </div>
        <div class="modal-body" id="modal-body">
          <!-- Content will be inserted by JavaScript -->
        </div>
      </div>
    </div>

    <div class="toast" id="toast">
      <i class="fas fa-exclamation-circle toast-icon"></i>
      <span id="toast-message">This is a toast message</span>
    </div>

    <footer class="footer">
      <p>
        This product uses the OMDb API but is not endorsed or certified by OMDb.
      </p>
    </footer>

    <script>
      // API configuration
      const API_KEY = '93562e5e';
      const API_URL = 'https://www.omdbapi.com/';
      const POSTER_URL = 'https://img.omdbapi.com/';
      const IMG_PATH = 'https://img.omdbapi.com/?apikey=93562e5e&'; // For poster images

      // DOM elements
      const main = document.getElementById('main');
      const movieGrid = document.getElementById('movie-grid');
      const searchInput = document.getElementById('search');
      const searchSuggestions = document.getElementById('search-suggestions');
      const searchLoading = document.getElementById('search-loading');
      const clearSearchBtn = document.getElementById('clear-search');
      const sectionTitle = document.getElementById('section-title');
      const pagination = document.getElementById('pagination');
      const tabs = document.querySelectorAll('.tab');
      const modal = document.getElementById('movie-modal');
      const modalTitle = document.getElementById('modal-title');
      const modalBody = document.getElementById('modal-body');
      const closeModal = document.getElementById('close-modal');
      const toast = document.getElementById('toast');
      const toastMessage = document.getElementById('toast-message');
      const exploreCta = document.getElementById('explore-cta');
      const genreFilters = document.getElementById('genre-filters');
      const genreSelect = document.getElementById('genre-select');
      const applyGenre = document.getElementById('apply-genre');
      const featuredCarousel = document.getElementById('featured-carousel');

      // State variables
      let currentPage = 1;
      let totalPages = 1;
      let currentCategory = 'popular';
      let currentSearchTerm = '';
      let movies = [];
      let searchDebounceTimer;
      let suggestionDebounceTimer;
      let lastSearchTerm = '';

      // Initialize the app
      document.addEventListener('DOMContentLoaded', () => {
        getMovies('popular', 1);
        getFeaturedMovies();
        setupEventListeners();
        
        // Close suggestions when clicking outside
        document.addEventListener('click', (e) => {
          if (!searchInput.contains(e.target) && !searchSuggestions.contains(e.target)) {
            hideSuggestions();
          }
        });
      });

      // Set up event listeners
      function setupEventListeners() {
        // Search functionality with debounce
        searchInput.addEventListener('input', (e) => {
          const searchTerm = e.target.value.trim();
          
          // Show/hide clear button
          if (searchTerm) {
            clearSearchBtn.classList.add('active');
          } else {
            clearSearchBtn.classList.remove('active');
            hideSuggestions();
          }
          
          // Clear previous timers
          clearTimeout(searchDebounceTimer);
          clearTimeout(suggestionDebounceTimer);
          
          // Get suggestions with shorter debounce
          suggestionDebounceTimer = setTimeout(() => {
            if (searchTerm && searchTerm !== lastSearchTerm) {
              getSearchSuggestions(searchTerm);
            }
          }, 300);
          
          // Search with longer debounce
          searchDebounceTimer = setTimeout(() => {
            if (searchTerm) {
              currentSearchTerm = searchTerm;
              searchMovies(searchTerm, 1);
            } else {
              currentSearchTerm = '';
              getMovies(currentCategory, 1);
            }
          }, 800);
        });
        
        // Clear search
        clearSearchBtn.addEventListener('click', () => {
          searchInput.value = '';
          currentSearchTerm = '';
          clearSearchBtn.classList.remove('active');
          hideSuggestions();
          getMovies(currentCategory, 1);
          searchInput.focus();
        });
        
        // Keyboard navigation for search
        searchInput.addEventListener('keydown', (e) => {
          if (e.key === 'ArrowDown') {
            e.preventDefault();
            const firstSuggestion = searchSuggestions.querySelector('.suggestion-item');
            if (firstSuggestion) {
              firstSuggestion.focus();
            }
          }
          
          if (e.key === 'Escape') {
            hideSuggestions();
            searchInput.focus();
          }
        });

        // Tab switching
        tabs.forEach(tab => {
          tab.addEventListener('click', () => {
            if (tab.classList.contains('active')) return;
            
            // Update active tab
            tabs.forEach(t => t.classList.remove('active'));
            tab.classList.add('active');
            
            // Show/hide genre filters
            if (tab.dataset.category === 'genre') {
              genreFilters.style.display = 'flex';
            } else {
              genreFilters.style.display = 'none';
            }
            
            // Load new category
            currentCategory = tab.dataset.category;
            currentSearchTerm = '';
            searchInput.value = '';
            clearSearchBtn.classList.remove('active');
            hideSuggestions();
            
            if (currentCategory === 'genre') {
              // Default to first genre
              getMoviesByGenre(genreSelect.value, 1);
            } else {
              getMovies(currentCategory, 1);
            }
          });
        });

        // Genre filter
        applyGenre.addEventListener('click', () => {
          getMoviesByGenre(genreSelect.value, 1);
        });

        // Close modal
        closeModal.addEventListener('click', () => {
          closeMovieModal();
        });

        // Close modal when clicking outside
        modal.addEventListener('click', (e) => {
          if (e.target === modal) {
            closeMovieModal();
          }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && modal.classList.contains('active')) {
            closeMovieModal();
          }
        });

        // Explore CTA button
        exploreCta.addEventListener('click', () => {
          document.querySelector('.nav-tabs').scrollIntoView({ behavior: 'smooth' });
        });
      }

      // Get featured movies for carousel
      async function getFeaturedMovies() {
        try {
          // OMDb API doesn't have a "popular" endpoint, so we'll search for popular movies
          const response = await fetch(`${API_URL}?apikey=${API_KEY}&s=movie&type=movie&page=1`);
          
          if (!response.ok) {
            throw new Error(`API error: ${response.status}`);
          }
          
          const data = await response.json();
          if (data.Response === 'True') {
            // Get details for each movie to have more data
            const movieDetails = await Promise.all(
              data.Search.slice(0, 10).map(movie => 
                fetch(`${API_URL}?apikey=${API_KEY}&i=${movie.imdbID}`).then(res => res.json())
              )
            );
            displayFeaturedMovies(movieDetails);
          } else {
            throw new Error(data.Error || 'Failed to fetch featured movies');
          }
          
        } catch (error) {
          console.error('Error fetching featured movies:', error);
        }
      }

      // Display featured movies in carousel
      function displayFeaturedMovies(movies) {
        featuredCarousel.innerHTML = '';
        
        movies.forEach(movie => {
          const { Title, imdbRating } = movie;
          
          const carouselItem = document.createElement('div');
          carouselItem.className = 'carousel-item';
          
          const voteClass = getVoteClass(imdbRating);
          
          carouselItem.innerHTML = `
            <div class="poster-container" data-imdbid="${movie.imdbID}">
              <div class="skeleton skeleton-poster"></div>
            </div>
            <div class="carousel-info">
              <h3>${Title}</h3>
              ${imdbRating && imdbRating !== 'N/A' ? 
                `<span class="carousel-rating ${voteClass}">${imdbRating}</span>` : 
                ''}
            </div>
          `;
          
          // Load poster with fallback
          loadPosterWithFallback(movie, carouselItem.querySelector('.poster-container'));
          
          carouselItem.addEventListener('click', () => {
            showMovieDetails(movie);
          });
          
          featuredCarousel.appendChild(carouselItem);
        });
      }

      // Get search suggestions
      async function getSearchSuggestions(query) {
        try {
          if (!query || query.length < 2) {
            hideSuggestions();
            return;
          }
          
          searchLoading.classList.add('active');
          lastSearchTerm = query;
          
          const response = await fetch(`${API_URL}?apikey=${API_KEY}&s=${encodeURIComponent(query)}&type=movie`);
          
          if (!response.ok) {
            throw new Error(`API error: ${response.status}`);
          }
          
          const data = await response.json();
          if (data.Response === 'True') {
            displaySearchSuggestions(data.Search.slice(0, 5)); // Show top 5 results
          } else {
            hideSuggestions();
          }
          
        } catch (error) {
          console.error('Error fetching search suggestions:', error);
          hideSuggestions();
        } finally {
          searchLoading.classList.remove('active');
        }
      }
      
      // Display search suggestions
      function displaySearchSuggestions(suggestions) {
        if (!suggestions || suggestions.length === 0) {
          hideSuggestions();
          return;
        }
        
        searchSuggestions.innerHTML = '';
        
        suggestions.forEach(movie => {
          const suggestionItem = document.createElement('div');
          suggestionItem.className = 'suggestion-item';
          suggestionItem.tabIndex = 0;
          
          const year = movie.Year && movie.Year !== 'N/A' ? movie.Year : 'N/A';
          
          suggestionItem.innerHTML = `
            <div class="suggestion-poster" data-imdbid="${movie.imdbID}">
              <div class="skeleton" style="width: 40px; height: 60px; border-radius: 6px;"></div>
            </div>
            <div class="suggestion-info">
              <div class="suggestion-title">${movie.Title}</div>
              <div class="suggestion-year">${year}</div>
            </div>
          `;
          
          // Load poster with fallback
          loadPosterWithFallback(movie, suggestionItem.querySelector('.suggestion-poster'), true);
          
          suggestionItem.addEventListener('click', () => {
            searchInput.value = movie.Title;
            currentSearchTerm = movie.Title;
            hideSuggestions();
            searchMovies(movie.Title, 1);
          });
          
          // Keyboard navigation
          suggestionItem.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
              searchInput.value = movie.Title;
              currentSearchTerm = movie.Title;
              hideSuggestions();
              searchMovies(movie.Title, 1);
            } else if (e.key === 'ArrowDown') {
              e.preventDefault();
              const next = suggestionItem.nextElementSibling || searchSuggestions.firstElementChild;
              if (next) next.focus();
            } else if (e.key === 'ArrowUp') {
              e.preventDefault();
              const prev = suggestionItem.previousElementSibling || searchSuggestions.lastElementChild;
              if (prev) prev.focus();
              else searchInput.focus();
            } else if (e.key === 'Escape') {
              hideSuggestions();
              searchInput.focus();
            }
          });
          
          searchSuggestions.appendChild(suggestionItem);
        });
        
        searchSuggestions.classList.add('active');
      }
      
      // Hide search suggestions
      function hideSuggestions() {
        searchSuggestions.classList.remove('active');
        searchSuggestions.innerHTML = '';
      }

      // Get movies based on category and page
      async function getMovies(category, page = 1) {
        try {
          showLoading();
          currentPage = page;
          
          let searchQuery = '';
          switch(category) {
            case 'popular':
              searchQuery = 'movie';
              break;
            case 'now_playing':
              searchQuery = 'new';
              break;
            case 'upcoming':
              searchQuery = 'upcoming';
              break;
            case 'top_rated':
              searchQuery = 'best';
              break;
            case 'trending':
              searchQuery = 'trending';
              break;
            default:
              searchQuery = 'movie';
          }
          
          const response = await fetch(`${API_URL}?apikey=${API_KEY}&s=${searchQuery}&type=movie&page=${page}`);
          
          if (!response.ok) {
            throw new Error(`API error: ${response.status}`);
          }
          
          const data = await response.json();
          if (data.Response === 'True') {
            // Get details for each movie to have more data
            const movieDetails = await Promise.all(
              data.Search.map(movie => 
                fetch(`${API_URL}?apikey=${API_KEY}&i=${movie.imdbID}`).then(res => res.json())
              )
            );
            movies = movieDetails;
            totalPages = Math.ceil(data.totalResults / 10);
            
            displayMovies(movies);
            updatePagination();
            updateSectionTitle(category);
          } else {
            throw new Error(data.Error || 'Failed to fetch movies');
          }
          
        } catch (error) {
          console.error('Error fetching movies:', error);
          showError('Failed to load movies. Please try again later.');
        }
      }

      // Get movies by genre
      async function getMoviesByGenre(genre, page = 1) {
        try {
          showLoading();
          currentPage = page;
          
          const response = await fetch(`${API_URL}?apikey=${API_KEY}&s=${genre}&type=movie&page=${page}`);
          
          if (!response.ok) {
            throw new Error(`API error: ${response.status}`);
          }
          
          const data = await response.json();
          if (data.Response === 'True') {
            // Get details for each movie to have more data
            const movieDetails = await Promise.all(
              data.Search.map(movie => 
                fetch(`${API_URL}?apikey=${API_KEY}&i=${movie.imdbID}`).then(res => res.json())
              )
            );
            movies = movieDetails;
            totalPages = Math.ceil(data.totalResults / 10);
            
            displayMovies(movies);
            updatePagination();
            updateSectionTitle('genre', genre);
          } else {
            throw new Error(data.Error || 'Failed to fetch movies by genre');
          }
          
        } catch (error) {
          console.error('Error fetching movies by genre:', error);
          showError('Failed to load movies. Please try again later.');
        }
      }

      // Search movies
      async function searchMovies(query, page = 1) {
        try {
          showLoading();
          currentPage = page;
          hideSuggestions();
          
          const response = await fetch(`${API_URL}?apikey=${API_KEY}&s=${encodeURIComponent(query)}&type=movie&page=${page}`);
          
          if (!response.ok) {
            throw new Error(`API error: ${response.status}`);
          }
          
          const data = await response.json();
          if (data.Response === 'True') {
            // Get details for each movie to have more data
            const movieDetails = await Promise.all(
              data.Search.map(movie => 
                fetch(`${API_URL}?apikey=${API_KEY}&i=${movie.imdbID}`).then(res => res.json())
              )
            );
            movies = movieDetails;
            totalPages = Math.ceil(data.totalResults / 10);
            
            if (movies.length === 0) {
              showNoResults(query);
            } else {
              displayMovies(movies);
              updatePagination();
              updateSectionTitle('search', query);
            }
          } else {
            showNoResults(query);
          }
          
        } catch (error) {
          console.error('Error searching movies:', error);
          showError('Failed to search movies. Please try again later.');
        }
      }

      // Display movies in the grid
      function displayMovies(movies) {
        movieGrid.innerHTML = '';
        
        movies.forEach((movie, index) => {
          const movieCard = createMovieCard(movie, index);
          movieGrid.appendChild(movieCard);
        });
      }

      // Create a movie card element
      function createMovieCard(movie, index) {
        const { Title, imdbRating, Year, Plot, imdbID } = movie;
        
        const card = document.createElement('div');
        card.className = 'movie-card';
        card.style.animationDelay = `${index * 0.1}s`;
        card.setAttribute('aria-label', `${Title} movie card`);
        
        const voteClass = getVoteClass(imdbRating);
        const shortOverview = Plot && Plot !== 'N/A' ? Plot.substring(0, 150) + '...' : 'No overview available.';
        
        card.innerHTML = `
          ${imdbRating && parseFloat(imdbRating) > 8 ? '<div class="trending-badge">Trending</div>' : ''}
          ${imdbRating && parseFloat(imdbRating) > 8.5 ? '<div class="award-badge">Award Winner</div>' : ''}
          <div class="poster-container" data-imdbid="${imdbID}">
            <div class="skeleton skeleton-poster"></div>
          </div>
          <div class="movie-info">
            <h3>${Title}</h3>
            ${imdbRating && imdbRating !== 'N/A' ? 
              `<span class="${voteClass}">${imdbRating}</span>` : 
              '<span>N/A</span>'}
          </div>
          <div class="overview">
            <h4>${Title} (${Year})</h4>
            <p>${shortOverview}</p>
          </div>
        `;
        
        // Load poster with fallback
        loadPosterWithFallback(movie, card.querySelector('.poster-container'));
        
        card.addEventListener('click', () => {
          showMovieDetails(movie);
        });
        
        return card;
      }

      // Load poster with fallback for missing images
      function loadPosterWithFallback(movie, container, isSuggestion = false) {
        const { Poster, Title, imdbID } = movie;
        const posterUrl = Poster && Poster !== 'N/A' ? Poster : '';
        
        if (!posterUrl) {
          showPosterPlaceholder(container, Title, isSuggestion);
          return;
        }
        
        const img = new Image();
        
        img.onload = function() {
          // Remove skeleton loading
          const skeleton = container.querySelector('.skeleton');
          if (skeleton) {
            skeleton.remove();
          }
          
          // Create and append the image
          const imgElement = document.createElement('img');
          imgElement.src = posterUrl;
          imgElement.alt = `${Title} movie poster`;
          imgElement.style.width = '100%';
          imgElement.style.height = isSuggestion ? '60px' : '400px';
          imgElement.style.objectFit = 'cover';
          if (!isSuggestion) {
            imgElement.style.transition = 'transform 0.5s ease';
          }
          
          container.appendChild(imgElement);
        };
        
        img.onerror = function() {
          showPosterPlaceholder(container, Title, isSuggestion);
        };
        
        img.src = posterUrl;
        
        // Set timeout to handle cases where image doesn't load or load event doesn't fire
        setTimeout(() => {
          if (!container.querySelector('img') && !container.querySelector('.poster-placeholder')) {
            showPosterPlaceholder(container, Title, isSuggestion);
          }
        }, 3000);
      }

      // Show poster placeholder when image is not available
      function showPosterPlaceholder(container, title, isSuggestion = false) {
        // Remove skeleton loading
        const skeleton = container.querySelector('.skeleton');
        if (skeleton) {
          skeleton.remove();
        }
        
        // Create placeholder
        const placeholder = document.createElement('div');
        placeholder.className = 'poster-placeholder';
        placeholder.style.width = '100%';
        placeholder.style.height = isSuggestion ? '60px' : '400px';
        placeholder.innerHTML = `
          <i class="fas fa-film"></i>
          <p>${title.substring(0, 15)}${title.length > 15 ? '...' : ''}</p>
        `;
        
        container.appendChild(placeholder);
      }

      // Show movie details in modal
      async function showMovieDetails(movie) {
        try {
          // Fetch additional movie details
          const response = await fetch(`${API_URL}?apikey=${API_KEY}&i=${movie.imdbID}&plot=full`);
          
          if (!response.ok) {
            throw new Error('Failed to fetch movie details');
          }
          
          const movieDetails = await response.json();
          
          if (movieDetails.Response !== 'True') {
            throw new Error('Movie details not found');
          }
          
          const { Title, Poster, imdbRating, Released, Plot, Genre, Runtime, BoxOffice, imdbVotes, Director, Actors, Writer, Awards, Ratings } = movieDetails;
          
          modalTitle.textContent = Title;
          
          const voteClass = getVoteClass(imdbRating);
          const year = Released && Released !== 'N/A' ? Released.substring(0, 4) : 'N/A';
          
          modalBody.innerHTML = `
            <div class="modal-poster" id="modal-poster">
              <div class="skeleton" style="width: 100%; height: 500px;"></div>
            </div>
            <div class="modal-details">
              <div class="detail-item">
                <h4>Release Date</h4>
                <p>${Released && Released !== 'N/A' ? Released : 'Unknown'}</p>
              </div>
              <div class="detail-item">
                <h4>Rating</h4>
                <p>${imdbRating && imdbRating !== 'N/A' ? 
                  `<span class="${voteClass}">${imdbRating}</span>/10 (${imdbVotes} votes)` : 
                  'N/A'}</p>
              </div>
              <div class="detail-item">
                <h4>Runtime</h4>
                <p>${Runtime && Runtime !== 'N/A' ? Runtime : 'N/A'}</p>
              </div>
              <div class="detail-item">
                <h4>Box Office</h4>
                <p>${BoxOffice && BoxOffice !== 'N/A' ? BoxOffice : 'N/A'}</p>
              </div>
              <div class="detail-item">
                <h4>Genres</h4>
                <div class="genre-list">
                  ${Genre && Genre !== 'N/A' ? 
                    Genre.split(', ').map(genre => `<span class="genre">${genre}</span>`).join('') : 
                    '<span>N/A</span>'}
                </div>
              </div>
              <div class="detail-item">
                <h4>Awards</h4>
                <p>${Awards && Awards !== 'N/A' ? Awards : 'N/A'}</p>
              </div>
              <div class="detail-item">
                <h4>Directed By</h4>
                <p>${Director && Director !== 'N/A' ? Director : 'N/A'}</p>
              </div>
              <div class="detail-item">
                <h4>Starring</h4>
                <p>${Actors && Actors !== 'N/A' ? Actors : 'N/A'}</p>
              </div>
              <div class="detail-item">
                <h4>Written By</h4>
                <p>${Writer && Writer !== 'N/A' ? Writer : 'N/A'}</p>
              </div>
              <div class="detail-item">
                <h4>Overview</h4>
                <p>${Plot && Plot !== 'N/A' ? Plot : 'No overview available.'}</p>
              </div>
              
              ${Ratings && Ratings.length > 0 ? `
              <div class="detail-item">
                <h4>Ratings</h4>
                ${Ratings.map(rating => `
                  <p>${rating.Source}: ${rating.Value}</p>
                `).join('')}
              </div>
              ` : ''}
            </div>
          `;
          
          // Load poster with fallback for modal
          const modalPosterContainer = document.getElementById('modal-poster');
          if (Poster && Poster !== 'N/A') {
            const img = new Image();
            
            img.onload = function() {
              // Remove skeleton loading
              const skeleton = modalPosterContainer.querySelector('.skeleton');
              if (skeleton) {
                skeleton.remove();
              }
              
              // Create and append the image
              const imgElement = document.createElement('img');
              imgElement.src = Poster;
              imgElement.alt = `${Title} movie poster`;
              imgElement.style.width = '100%';
              imgElement.style.display = 'block';
              
              modalPosterContainer.appendChild(imgElement);
            };
            
            img.onerror = function() {
              showModalPosterPlaceholder(modalPosterContainer, Title);
            };
            
            img.src = Poster;
          } else {
            showModalPosterPlaceholder(modalPosterContainer, Title);
          }
          
          modal.classList.add('active');
          document.body.style.overflow = 'hidden';
          
        } catch (error) {
          console.error('Error fetching movie details:', error);
          showToast('Failed to load movie details', 'error');
        }
      }

      // Show modal poster placeholder
      function showModalPosterPlaceholder(container, title) {
        // Remove skeleton loading
        const skeleton = container.querySelector('.skeleton');
        if (skeleton) {
          skeleton.remove();
        }
        
        // Create placeholder
        const placeholder = document.createElement('div');
        placeholder.className = 'poster-placeholder';
        placeholder.style.width = '100%';
        placeholder.style.height = '500px';
        placeholder.innerHTML = `
          <i class="fas fa-film" style="font-size: 4rem;"></i>
          <p>${title}</p>
          <p style="font-size: 0.8rem; margin-top: 1rem;">Poster not available</p>
        `;
        
        container.appendChild(placeholder);
      }

      // Close movie modal
      function closeMovieModal() {
        modal.classList.remove('active');
        document.body.style.overflow = '';
      }

      // Update pagination controls
      function updatePagination() {
        pagination.innerHTML = '';
        
        if (totalPages <= 1) return;
        
        // Previous button
        const prevBtn = document.createElement('button');
        prevBtn.className = 'page-btn';
        prevBtn.innerHTML = '<i class="fas fa-chevron-left"></i>';
        prevBtn.addEventListener('click', () => {
          if (currentPage > 1) {
            loadPage(currentPage - 1);
          }
        });
        
        if (currentPage === 1) {
          prevBtn.classList.add('disabled');
        }
        
        pagination.appendChild(prevBtn);
        
        // Page buttons
        const startPage = Math.max(1, currentPage - 2);
        const endPage = Math.min(totalPages, startPage + 4);
        
        for (let i = startPage; i <= endPage; i++) {
          const pageBtn = document.createElement('button');
          pageBtn.className = 'page-btn';
          if (i === currentPage) {
            pageBtn.classList.add('active');
          }
          pageBtn.textContent = i;
          pageBtn.addEventListener('click', () => loadPage(i));
          pagination.appendChild(pageBtn);
        }
        
        // Next button
        const nextBtn = document.createElement('button');
        nextBtn.className = 'page-btn';
        nextBtn.innerHTML = '<i class="fas fa-chevron-right"></i>';
        nextBtn.addEventListener('click', () => {
          if (currentPage < totalPages) {
            loadPage(currentPage + 1);
          }
        });
        
        if (currentPage === totalPages) {
          nextBtn.classList.add('disabled');
        }
        
        pagination.appendChild(nextBtn);
      }

      // Load a specific page
      function loadPage(page) {
        if (currentSearchTerm) {
          searchMovies(currentSearchTerm, page);
        } else if (currentCategory === 'genre') {
          getMoviesByGenre(genreSelect.value, page);
        } else {
          getMovies(currentCategory, page);
        }
        
        // Scroll to top
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }

      // Update section title based on category
      function updateSectionTitle(category, extra = '') {
        let title = '';
        
        switch(category) {
          case 'popular':
            title = 'Popular Movies';
            break;
          case 'now_playing':
            title = 'Now Playing';
            break;
          case 'upcoming':
            title = 'Upcoming Movies';
            break;
          case 'top_rated':
            title = 'Top Rated Movies';
            break;
          case 'trending':
            title = 'Trending This Week';
            break;
          case 'genre':
            title = `${extra.charAt(0).toUpperCase() + extra.slice(1)} Movies`;
            break;
          case 'search':
            title = `Search Results for "${extra}"`;
            break;
          default:
            title = 'Movies';
        }
        
        sectionTitle.textContent = title;
      }

      // Show loading state
      function showLoading() {
        movieGrid.innerHTML = '';
        for (let i = 0; i < 6; i++) {
          const skeletonCard = document.createElement('div');
          skeletonCard.className = 'skeleton-card';
          skeletonCard.innerHTML = `
            <div class="skeleton skeleton-poster"></div>
            <div class="skeleton skeleton-text" style="width: 70%"></div>
            <div class="skeleton skeleton-text" style="width: 30%"></div>
          `;
          movieGrid.appendChild(skeletonCard);
        }
        pagination.innerHTML = '';
      }

      // Show error state
      function showError(message) {
        movieGrid.innerHTML = `
          <div class="error-message">
            <div class="error-icon">
              <i class="fas fa-exclamation-triangle"></i>
            </div>
            <p>${message}</p>
            <button class="retry-btn" onclick="retryLastAction()">
              <i class="fas fa-redo"></i>
              Retry
            </button>
          </div>
        `;
        pagination.innerHTML = '';
        
        // Also show toast notification
        showToast(message, 'error');
      }

      // Show no results state
      function showNoResults(query) {
        movieGrid.innerHTML = `
          <div class="not-found">
            <div class="not-found-icon">
              <i class="fas fa-search"></i>
            </div>
            <h3>No results found</h3>
            <p>We couldn't find any movies matching "${query}"</p>
            <button class="retry-btn" onclick="getMovies('popular', 1)">
              <i class="fas fa-film"></i>
              Browse Popular Movies
            </button>
          </div>
        `;
        pagination.innerHTML = '';
      }

      // Retry last action
      function retryLastAction() {
        if (currentSearchTerm) {
          searchMovies(currentSearchTerm, currentPage);
        } else if (currentCategory === 'genre') {
          getMoviesByGenre(genreSelect.value, currentPage);
        } else {
          getMovies(currentCategory, currentPage);
        }
      }

      // Show toast notification
      function showToast(message, type = 'error') {
        toastMessage.textContent = message;
        toast.className = `toast ${type}`;
        toast.classList.add('show');
        
        setTimeout(() => {
          toast.classList.remove('show');
        }, 3000);
      }

      // Helper function to get vote rating class
      function getVoteClass(vote) {
        if (!vote || vote === 'N/A') return 'red';
        
        const numericVote = parseFloat(vote);
        if (numericVote >= 8) return 'gold';
        if (numericVote >= 7) return 'green';
        if (numericVote >= 5) return 'orange';
        return 'red';
      }
    </script>
  </body>
</html>
